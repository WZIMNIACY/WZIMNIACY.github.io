<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pop-up — Podsumowanie</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700&display=swap" rel="stylesheet">
<style>
  :root{
    --body-color: #1b1b1b;
    --panel: #2c2c2c;
    --accent: #00ffcc;
    --text: #ffffff;
    --muted: #bfbfbf;
    --blue-team: #163236;
    --red-team: #3e0711;
    --radius: 12px;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    font-family: 'Space Mono', monospace;
    background: #0f0f0f;
    color:var(--text);
    -webkit-font-smoothing:antialiased;
  }

  /* Overlay - subtelne, ale ciemne żeby czytelne */
  .overlay{
    position:fixed; inset:0;
    background: rgba(0,0,0,0.45);
    display:flex; align-items:center; justify-content:center;
    z-index:9999;
  }

  /* Popup container */
  .popup {
    width: min(880px, 94vw);
    max-height: 86vh;
    background: linear-gradient(180deg, #232323 0%, #181818 100%);
    border-radius: calc(var(--radius));
    border: 1px solid rgba(0,255,204,0.14);
    box-shadow: 0 20px 50px rgba(0,0,0,0.75);
    padding: 18px;
    display:flex;
    flex-direction: column;
    gap: 12px;
    overflow: hidden;
  }

  /* Header */
  .header {
    display:flex;
    align-items:center;
    gap:12px;
  }
  .badge {
    width:64px; height:64px; border-radius:10px;
    background: linear-gradient(180deg, rgba(0,255,204,0.06), rgba(0,0,0,0.04));
    display:flex; align-items:center; justify-content:center;
    font-weight:700; color:var(--text); border:1px solid rgba(255,255,255,0.03);
  }
  .title {
    display:flex; flex-direction:column;
  }
  .title .big { font-size:1.45rem; color:var(--accent); font-weight:800; line-height:1; }
  .title .small { color: var(--muted); font-size:0.85rem; }

  /* Content area: two columns + right actions */
  .content {
    display:flex; gap:12px; align-items:flex-start; flex:1 1 auto; min-height: 120px;
    overflow:hidden;
  }

  .columns {
    display:flex; gap:12px; flex:1 1 auto; min-width:0; overflow:auto; padding-right:6px;
  }

  .team {
    flex:1 1 0;
    min-width: 200px;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
    border-radius:10px;
    padding:10px;
    border:1px solid rgba(255,255,255,0.02);
    display:flex; flex-direction:column; gap:8px;
  }

  .team .head {
    display:flex; align-items:center; justify-content:space-between;
  }
  .team .name { font-weight:800; }
  .team .tag {
    padding:4px 8px; border-radius:6px; background: rgba(255,255,255,0.02);
    color:var(--muted); font-weight:700; font-size:0.85rem; border:1px solid rgba(255,255,255,0.02);
  }

  /* Stat row */
  .stat {
    display:flex; justify-content:space-between; align-items:center;
    background: rgba(0,0,0,0.18); padding:8px; border-radius:8px;
    border: 1px solid rgba(255,255,255,0.02);
  }
  .stat .label { color:var(--muted); font-weight:700; font-size:0.92rem; }
  .stat .num { font-weight:900; font-size:1.05rem; color:var(--text); }

  /* bars visual */
  .bar {
    height:10px; background: rgba(255,255,255,0.02); border-radius:6px; overflow:hidden; margin-top:6px; border:1px solid rgba(255,255,255,0.01);
  }
  .bar > i { display:block; height:100%; width:0%; background: linear-gradient(90deg, var(--accent), rgba(0,255,204,0.25)); box-shadow: inset 0 4px 14px rgba(0,255,204,0.03); transition: width 360ms ease; }

  /* right side actions / summary */
  .side {
    width:220px; min-width:180px; display:flex; flex-direction:column; gap:10px;
  }
  .summary {
    padding:10px; border-radius:8px; background: rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.02);
  }
  .summary .row { display:flex; justify-content:space-between; color:var(--muted); padding:4px 0; }

  .actions { display:flex; gap:8px; flex-direction:column; }
  .btn {
    padding:10px 12px; border-radius:8px; font-weight:800; cursor:pointer; border:1px solid rgba(255,255,255,0.03);
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02)); color:var(--text);
  }
  .btn.primary { background: linear-gradient(180deg, rgba(0,255,204,0.12), rgba(0,255,204,0.04)); color:#061816; border:1px solid rgba(0,255,204,0.12); }

  /* footer */
  .footer { display:flex; justify-content:flex-end; gap:10px; margin-top:6px; }

  /* responsive: stack columns vertically if low height or narrow width */
  @media (max-width:820px), (max-height:700px){
    .popup { padding:14px; }
    .content { flex-direction:column; }
    .side { width:100%; min-width:0; order:3; }
    .columns { order:1; }
  }

  /* ensure text visibility (safeguard) */
  .team, .stat, .summary { color: var(--text); }
</style>
</head>
<body>
<img src="./img/GameScreenShot.jpg">
<!-- overlay + popup -->
<div class="overlay" id="overlay" role="dialog" aria-modal="true">
  <div class="popup" role="document" aria-label="Podsumowanie gry">
    <div class="header">
      <div class="badge" aria-hidden="true">★</div>
      <div class="title">
        <div class="big">Koniec gry</div>
        <div class="small">Retro-future podsumowanie</div>
      </div>
    </div>

    <div class="content">
      <div class="columns" id="columns">
        <!-- Blue team -->
        <div class="team" id="team-blue" aria-label="Drużyna niebieska">
          <div class="head">
            <div class="name"><span style="display:inline-block;width:10px;height:10px;background:var(--blue-team);border-radius:2px;margin-right:8px;vertical-align:middle"></span> Niebiescy</div>
          </div>

          <div class="stat">
            <div class="label">Odnalezione (swoje)</div>
            <div class="num" id="blue_own">—</div>
          </div>
          <div class="bar"><i id="blue_bar_own" style="width:0%"></i></div>

          <div class="stat">
            <div class="label">Odnalezione (neutralne)</div>
            <div class="num" id="blue_neutral">—</div>
          </div>
          <div class="bar"><i id="blue_bar_neutral" style="width:0%"></i></div>

          <div class="stat">
            <div class="label">Odnalezione (przeciwnika)</div>
            <div class="num" id="blue_enemy">—</div>
          </div>
          <div class="bar"><i id="blue_bar_enemy" style="width:0%"></i></div>

          <div class="stat">
            <div class="label">Najdłuższa seria poprawnych</div>
            <div class="num" id="blue_streak">—</div>
          </div>
        </div>

        <!-- Red team -->
        <div class="team" id="team-red" aria-label="Drużyna czerwona">
          <div class="head">
            <div class="name"><span style="display:inline-block;width:10px;height:10px;background:var(--red-team);border-radius:2px;margin-right:8px;vertical-align:middle"></span> Czerwoni</div>
          </div>

          <div class="stat">
            <div class="label">Odnalezione (swoje)</div>
            <div class="num" id="red_own">—</div>
          </div>
          <div class="bar"><i id="red_bar_own" style="width:0%"></i></div>

          <div class="stat">
            <div class="label">Odnalezione (neutralne)</div>
            <div class="num" id="red_neutral">—</div>
          </div>
          <div class="bar"><i id="red_bar_neutral" style="width:0%"></i></div>

          <div class="stat">
            <div class="label">Odnalezione (przeciwnika)</div>
            <div class="num" id="red_enemy">—</div>
          </div>
          <div class="bar"><i id="red_bar_enemy" style="width:0%"></i></div>

          <div class="stat">
            <div class="label">Najdłuższa seria poprawnych</div>
            <div class="num" id="red_streak">—</div>
          </div>
        </div>
      </div>

      <!-- right side -->
      <div class="side">
        <div class="summary" aria-label="Szybki przegląd">
          <div style="font-weight:800;margin-bottom:8px">Szybki przegląd</div>
          <div class="row"><div>Łącznie znaleziono:</div><div id="totalFound">—</div></div>
          <div class="row"><div>Najdłuższa seria:</div><div id="longestOverall">—</div></div>
        </div>
      </div>
    </div>

    <div class="footer">
      <a href="lobby.html"><button class="btn" id="shareBtn">Wróć do Lobby</button></a>
      <a href="index.html"></a><button class="btn" id="closeBtn">Wróć do Menu</button></a>
    </div>
  </div>
</div>

<script>
/* Demo: wypełnienie wartościami (podmień na dane z gry) */
(function(){
  const data = {
    blue: { own: 6, neutral: 1, enemy: 0, streak: 4 },
    red:  { own: 5,  neutral: 3, enemy: 1, streak: 2 }
  };

  // Wstaw teksty
  document.getElementById('blue_own').textContent = data.blue.own;
  document.getElementById('blue_neutral').textContent = data.blue.neutral;
  document.getElementById('blue_enemy').textContent = data.blue.enemy;
  document.getElementById('blue_streak').textContent = data.blue.streak;

  document.getElementById('red_own').textContent = data.red.own;
  document.getElementById('red_neutral').textContent = data.red.neutral;
  document.getElementById('red_enemy').textContent = data.red.enemy;
  document.getElementById('red_streak').textContent = data.red.streak;

  const total = data.blue.own + data.blue.neutral + data.blue.enemy + data.red.own + data.red.neutral + data.red.enemy;
  document.getElementById('totalFound').textContent = total;
  document.getElementById('longestOverall').textContent = Math.max(data.blue.streak, data.red.streak);

  // Ustaw szerokości pasków (proporcja w obrębie rodzaju karty)
  function setBar(elId, value, total){
    const pct = total ? Math.round( Math.min(100, (value/total)*100 ) ) : 0;
    const el = document.getElementById(elId);
    if(el) el.style.width = pct + '%';
  }
  const totals = { own: data.blue.own + data.red.own, neutral: data.blue.neutral + data.red.neutral, enemy: data.blue.enemy + data.red.enemy };
  setBar('blue_bar_own', data.blue.own, totals.own);
  setBar('red_bar_own', data.red.own, totals.own);
  setBar('blue_bar_neutral', data.blue.neutral, totals.neutral);
  setBar('red_bar_neutral', data.red.neutral, totals.neutral);
  setBar('blue_bar_enemy', data.blue.enemy, totals.enemy);
  setBar('red_bar_enemy', data.red.enemy, totals.enemy);

  function close(){ document.querySelector('.overlay').remove(); }
})();
</script>
</body>
</html>
